<!DOCTYPE html>
    <html lang="pt-br">
        <head>
            <base href="https://edypizzariadelivery.github.io/" />
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Edy Pizzaria - O melhor delivery de pizzas. Confira nosso cardÃ¡pio e faÃ§a seu pedido pelo WhatsApp!">
        <meta name="keywords" content="Pizzaria, Delivery, Pizza, Edy Pizzaria">
        <title>Edwiges Pizzas - CardÃ¡pio Online</title>
        <link rel="icon" href="logo.jpg" type="image/png">
    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
        <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap');

    body {
        background-color: #002D24;
        color: #FFFFFF;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
    }

    .container {
        display: grid;
        grid-template-areas: 
            "logo gif-area"
            "chat-area cart"
            "chat-area mascot";
        grid-template-columns: 3fr 1fr;
        grid-template-rows: auto 1fr auto;
        gap: 10px;
        padding: 10px;
        max-width: 1024px;
        width: 100%;
        height: 768px; /* 4:3 aspect ratio */
        box-sizing: border-box;
        background-color: rgba(0,0,0,0.5);
        border-radius: 10px;
    }

    .logo {
        grid-area: logo;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .logo img {
        max-width: 100px;
        height: auto;
    }

    .gif-area {
        grid-area: gif-area;
        background-color: #F5E050;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        overflow: hidden;
    }

    #currentGif {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .chat-area {
        grid-area: chat-area;
        background-color: #B80000;
        padding: 10px;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
    }

    .chat-box {
        background: #FFFFFF;
        color: #000000;
        flex-grow: 1;
        margin-bottom: 10px;
        overflow-y: auto;
        padding: 10px;
        border-radius: 5px;
    }

    .message {
        margin-bottom: 10px;
        padding: 8px 12px;
        border-radius: 5px;
        max-width: 80%;
    }

    .bot-message {
        background-color: #f1f1f1;
        align-self: flex-start;
    }

    .user-message {
        background-color: #e1f5fe;
        align-self: flex-end;
    }

    .chat-input {
        display: flex;
        gap: 10px;
    }

    .chat-input input {
        flex-grow: 1;
        padding: 10px;
        border: none;
        border-radius: 4px;
    }

    .btn {
        padding: 10px 20px;
        background-color: #00FF00;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s;
    }

    .btn:hover {
        background-color: #00CC00;
    }

    .cart {
        grid-area: cart;
        background-color: #FFFFFF;
        color: #000000;
        padding: 10px;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
    }

    #cartItems {
        list-style-type: none;
        padding: 0;
        margin: 10px 0;
        flex-grow: 1;
        overflow-y: auto;
    }

    #cartItems li {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        border-bottom: 1px solid #ccc;
        padding-bottom: 5px;
    }

    .mascot {
        grid-area: mascot;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .mascot img {
        max-width: 100px;
        height: auto;
        border-radius: 10px;
    }

    .options-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        margin-top: 10px;
    }

    .option-btn {
        background-color: #4CAF50;
        border: none;
        color: white;
        padding: 10px 15px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 14px;
        margin: 2px;
        cursor: pointer;
        border-radius: 4px;
    }

    @media (max-width: 768px) {
        .container {
            grid-template-areas: 
                "logo"
                "gif-area"
                "chat-area"
                "cart"
                "mascot";
            grid-template-columns: 1fr;
            grid-template-rows: auto auto 1fr auto auto;
            height: auto;
            min-height: 100vh;
        }
    }
</style>
</head>
<body>
    <div class="container">
        <header class="logo">
            <img src="https://edypizzariadelivery.github.io/logo.jpg" alt="Logo Edy Pizzaria">
        </header>
        
        <div class="gif-area">
            <img src="https://edypizzariadelivery.github.io/rino.gif" alt="GIF Alternativo" id="currentGif">
        </div>
        
        <div class="chat-area">
            <div class="chat-box" id="chatBox"></div>
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Digite sua mensagem...">
                <button id="sendChat" class="btn">ENVIAR</button>
            </div>
            <div class="options-buttons" id="optionsButtons"></div>
        </div>
        
        <aside class="cart">
            <h2>CARRINHO ðŸ›’</h2>
            <ul id="cartItems"></ul>
            <p>Total: R$ <span id="totalPrice">0,00</span></p>
            <button id="sendOrder" class="btn">ENVIAR PEDIDO</button>
        </aside>
        
        <div class="mascot">
            <img src="https://edypizzariadelivery.github.io/rino.gif" alt="Mascote">
        </div>
    </div>

    <script>
        const chatBox = document.getElementById('chatBox');
        const chatInput = document.getElementById('chatInput');
        const sendChatBtn = document.getElementById('sendChat');
        const sendOrderBtn = document.getElementById('sendOrder');
        const cartItemsContainer = document.getElementById('cartItems');
        const totalPriceElement = document.getElementById('totalPrice');
        const gifDisplay = document.getElementById('currentGif');
        const optionsButtons = document.getElementById('optionsButtons');

        const pizzas = [
            { name: 'Frango com Catupiry', description: 'IrresistÃ­vel mistura de frango desfiado com o cremoso catupiry.', price: 34.99 },
            { name: 'Carne Seca', description: 'Saborosa combinaÃ§Ã£o de carne seca desfiada, cebola e catupiry.', price: 39.99 },
            { name: 'Calabresa', description: 'Deliciosa pizza coberta com fatias de calabresa, cebola e azeitonas.', price: 34.99 },
            { name: 'Lombo canadense', description: 'IrresistÃ­vel combinaÃ§Ã£o de Lombo canadense, mussarela, cebola, requeijÃ£o cremoso.', price: 39.99 }
        ];

        let state = {
            userName: '',
            selectedPizzas: [],
            size: '',
            stuffedBorder: false,
            paymentMethod: '',
            deliveryMethod: '',
            address: {},
            totalPrice: 0,
            currentStep: 'name'
        };

        const cart = [];

        function addToCart(pizza) {
            cart.push(pizza);
            updateCart();
            updateTotalPrice();
            updateGif();
        }

        function updateCart() {
            cartItemsContainer.innerHTML = '';
            cart.forEach((item, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <div>
                        <strong>${item.name}</strong>
                        <p>R$ ${item.price.toFixed(2)}</p>
                    </div>
                    <button onclick="removeFromCart(${index})">Remover</button>
                `;
                cartItemsContainer.appendChild(li);
            });
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
            updateTotalPrice();
            updateGif();
        }

        function updateTotalPrice() {
            state.totalPrice = cart.reduce((total, item) => total + item.price, 0);
            totalPriceElement.textContent = state.totalPrice.toFixed(2);
        }

        function updateGif() {
            const gifs = [
                'https://edypizzariadelivery.github.io/gif1.gif',
                'https://edypizzariadelivery.github.io/gif2.gif',
                'https://edypizzariadelivery.github.io/gif3.gif'
            ];
            gifDisplay.src = cart.length > 0 ? gifs[0] : gifs[2];
        }

        sendOrderBtn.addEventListener('click', function() {
            if (cart.length === 0) {
                addMessage("Seu carrinho estÃ¡ vazio. Adicione pizzas antes de enviar o pedido.", 'bot-message');
                return;
            }
            const orderDetails = cart.map(item => `${item.name} - R$ ${item.price.toFixed(2)}`).join('\n');
            const message = `Pedido confirmado!\n${orderDetails}\nTotal: R$ ${state.totalPrice.toFixed(2)}`;
            addMessage(message, 'bot-message');
            cart.length = 0;
            updateCart();
            updateTotalPrice();
            updateGif();
            state.currentStep = 'finished';
            showOptions(['Novo Pedido']);
        });

        sendChatBtn.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') sendMessage();
        });

        function sendMessage() {
            const message = chatInput.value.trim();
            if (message) {
                addMessage(message, 'user-message');
                chatInput.value = '';
                processMessage(message);
            }
        }

        function addMessage(message, type) {
            const messageElement = document.createElement('div');
            messageElement.className = `message ${type}`;
            messageElement.textContent = message;
            chatBox.appendChild(messageElement);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function processMessage(message) {
            switch(state.currentStep) {
                case 'name':
                    state.userName = message;
                    addMessage(`OlÃ¡ ${state.userName}! Qual pizza vocÃª gostaria de pedir?`, 'bot-message');
                    showPizzaOptions();
                    state.currentStep = 'pizza_selection';
                    break;
                case 'pizza_selection':
                    const selectedPizza = pizzas.find(p => p.name.toLowerCase() === message.toLowerCase());
                    if (selectedPizza) {
                        addToCart(selectedPizza);
                        addMessage(`Ã“tima escolha! ${selectedPizza.name} foi adicionada ao seu carrinho. Deseja mais alguma coisa?`, 'bot-message');
                        showOptions(['Sim, outra pizza', 'NÃ£o, finalizar pedido']);
                    } else {
                        addMessage("Desculpe, nÃ£o temos essa pizza. Por favor, escolha uma das opÃ§Ãµes disponÃ­veis.", 'bot-message');
                        showPizzaOptions();
                    }
                    break;
                case 'finished':
                    if (message.toLowerCase() === 'novo pedido') {
                        resetOrder();
                    }
                    break;
                default:
                    addMessage("Desculpe, nÃ£o entendi. Pode repetir?", 'bot-message');
            }
        }

        function showPizzaOptions() {
            showOptions(pizzas.map(p => p.name));
        }

        function showOptions(options) {
            optionsButtons.innerHTML = '';
            options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = 'option-btn';
                button.onclick = () => {
                    addMessage(option, 'user-message');
                    processMessage(option);
                };
                optionsButtons.appendChild(button);
            });
        }

        function resetOrder() {
            state = {
                userName: '',
                selectedPizzas: [],
                size: '',
                stuffedBorder: false,
                paymentMethod: '',
                deliveryMethod: '',
                address: {},
                totalPrice: 0,
                currentStep: 'name'
            };
            cart.length = 0;
            updateCart();
            updateTotalPrice();
            updateGif();
            chatBox.innerHTML = '';
            addMessage("Bem-vindo Ã  Edy Pizzaria! Qual Ã© o seu nome?", 'bot-message');
        }

        addMessage("Bem-vindo Ã  Edy Pizzaria! Qual Ã© o seu nome?", 'bot-message');
    </script>
</body>
</html>
